<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400, initial-scale=1.0">
  <title>ClipStash</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <img class="header-icon" src="../icons/icon128.png" alt="ClipStash" width="20" height="20">
      <h1 class="header-title">ClipStash</h1>
    </div>
    <div class="header-right">
      <a id="btn-github" class="btn-icon" href="https://github.com/lonsty/clipstash" target="_blank" title="GitHub">
        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
          <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
        </svg>
      </a>
      <button id="btn-settings" class="btn-icon" data-i18n-title="settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
      </button>
      <button id="btn-clear-all" class="btn btn-danger-ghost">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
        </svg>
        <span data-i18n="clearAll"></span>
      </button>
    </div>
  </header>

  <!-- Search Bar -->
  <div class="search-bar">
    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
      <circle cx="11" cy="11" r="8"/>
      <line x1="21" y1="21" x2="16.65" y2="16.65"/>
    </svg>
    <input id="search-input" type="text" class="search-input" data-i18n-placeholder="searchPlaceholder">
    <button id="btn-search-clear" class="btn-icon search-clear" style="display: none;">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="12" height="12">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>

  <!-- Stats Bar -->
  <div id="stats-bar" class="stats-bar">
    <span id="stats-text"></span>
  </div>

  <!-- Cache List -->
  <main id="cache-list" class="cache-list"></main>

  <!-- Loading Indicator -->
  <div id="loading-more" class="loading-more" style="display: none;">
    <span class="loading-dot"></span>
    <span class="loading-dot"></span>
    <span class="loading-dot"></span>
  </div>

  <!-- Empty State -->
  <div id="empty-state" class="empty-state" style="display: none;">
    <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
      <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
      <line x1="9" y1="12" x2="15" y2="12"/>
    </svg>
    <p class="empty-title" data-i18n="emptyTitle"></p>
    <p class="empty-desc" data-i18n="emptyDesc"></p>
  </div>

  <!-- No Results State -->
  <div id="no-results" class="empty-state" style="display: none;">
    <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"/>
      <line x1="21" y1="21" x2="16.65" y2="16.65"/>
      <line x1="8" y1="11" x2="14" y2="11"/>
    </svg>
    <p class="empty-title" data-i18n="noResultsTitle"></p>
    <p class="empty-desc" data-i18n="noResultsDesc"></p>
  </div>

  <!-- Detail Modal -->
  <div id="modal-overlay" class="modal-overlay" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title" data-i18n="viewDetail"></span>
        <button id="btn-modal-close" class="btn-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <pre id="modal-content" class="modal-content"></pre>
        <div id="modal-image-wrap" class="modal-image-wrap" style="display:none;">
          <img id="modal-image" class="modal-image" alt="">
        </div>
        <div id="modal-html-wrap" class="modal-html-wrap" style="display:none;"></div>
      </div>
      <div class="modal-tags-section">
        <div class="modal-tags-header">
          <span class="modal-tags-label" data-i18n="tags"></span>
          <button id="btn-add-tag" class="btn btn-ghost btn-sm" data-i18n="addTag"></button>
        </div>
        <div id="modal-tags" class="modal-tags"></div>
        <div id="tag-input-wrap" class="tag-input-wrap" style="display: none;">
          <input id="tag-input" type="text" class="tag-input" data-i18n-placeholder="tagInputPlaceholder" maxlength="20">
          <div id="tag-suggestions" class="tag-suggestions" style="display: none;"></div>
        </div>
      </div>
      <div class="modal-footer">
        <span id="modal-meta" class="modal-meta"></span>
        <div class="modal-footer-actions">
          <button id="btn-modal-fullscreen" class="btn btn-ghost btn-sm" data-i18n-title="fullscreen">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
              <polyline points="15 3 21 3 21 9"/>
              <polyline points="9 21 3 21 3 15"/>
              <line x1="21" y1="3" x2="14" y2="10"/>
              <line x1="3" y1="21" x2="10" y2="14"/>
            </svg>
          </button>
          <button id="btn-modal-copy" class="btn btn-primary" data-i18n="copy"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirm Dialog -->
  <div id="confirm-overlay" class="modal-overlay" style="display: none;">
    <div class="confirm-dialog">
      <p id="confirm-title" class="confirm-title"></p>
      <p id="confirm-desc" class="confirm-desc"></p>
      <div class="confirm-actions">
        <button id="btn-confirm-cancel" class="btn btn-ghost" data-i18n="cancel"></button>
        <button id="btn-confirm-ok" class="btn btn-danger"></button>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settings-overlay" class="modal-overlay" style="display: none;">
    <div class="settings-panel">
      <div class="settings-header">
        <span class="settings-title" data-i18n="settings"></span>
        <button id="btn-settings-close" class="btn-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="settings-body">
        <!-- Language -->
        <div class="settings-item">
          <label class="settings-label" data-i18n="settingLang"></label>
          <div class="settings-desc" data-i18n="settingLangDesc"></div>
          <div class="settings-lang-btns" id="lang-btns">
            <button class="lang-btn" data-lang="en">English</button>
            <button class="lang-btn" data-lang="zh">中文</button>
          </div>
        </div>
        <!-- Theme -->
        <div class="settings-item">
          <label class="settings-label" data-i18n="settingTheme"></label>
          <div class="settings-desc" data-i18n="settingThemeDesc"></div>
          <div class="settings-theme-btns" id="theme-btns">
            <button class="theme-btn" data-theme="system" data-i18n="themeSystem"></button>
            <button class="theme-btn" data-theme="light" data-i18n="themeLight"></button>
            <button class="theme-btn" data-theme="dark" data-i18n="themeDark"></button>
          </div>
        </div>
        <!-- Cache Limit -->
        <div class="settings-item">
          <label class="settings-label" for="settings-max-cache" data-i18n="settingMaxCache"></label>
          <div class="settings-desc" data-i18n="settingMaxCacheDesc"></div>
          <div class="settings-input-row">
            <input id="settings-max-cache" type="number" class="settings-input" min="10" max="999" step="10">
            <span class="settings-unit" data-i18n="settingUnit"></span>
          </div>
        </div>
        <!-- Shortcut -->
        <div class="settings-item">
          <label class="settings-label" data-i18n="settingShortcut"></label>
          <div class="settings-desc" data-i18n="settingShortcutDesc"></div>
          <div class="settings-shortcut-info">
            <kbd id="shortcut-display" class="shortcut-kbd">Alt+Shift+C</kbd>
            <a id="shortcut-link" class="settings-link" href="#" data-i18n="settingShortcutHint"></a>
          </div>
        </div>
        <!-- Export / Import -->
        <div class="settings-item">
          <div class="settings-export-row">
            <button id="btn-export" class="btn btn-ghost btn-sm">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
              <span data-i18n="exportData"></span>
            </button>
            <button id="btn-import" class="btn btn-ghost btn-sm">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              <span data-i18n="importData"></span>
            </button>
            <input id="import-file" type="file" accept=".json" style="display:none;">
          </div>
          <div id="import-status" class="import-status" style="display:none;"></div>
        </div>
      </div>
      <div class="settings-footer">
        <button id="btn-settings-save" class="btn btn-primary" data-i18n="save"></button>
      </div>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
